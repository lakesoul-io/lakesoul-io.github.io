"use strict";(self.webpackChunklakesoul_website=self.webpackChunklakesoul_website||[]).push([[5317],{159:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>i,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var o=n(5893),t=n(1151);const r={},a="Setup LakeSoul Meta DB",l={id:"Usage Docs/setup-meta-env",title:"Setup LakeSoul Meta DB",description:"\x3c!--",source:"@site/docs/03-Usage Docs/01-setup-meta-env.md",sourceDirName:"03-Usage Docs",slug:"/Usage Docs/setup-meta-env",permalink:"/docs/Usage Docs/setup-meta-env",draft:!1,unlisted:!1,editUrl:"https://github.com/lakesoul-io/LakeSoul/tree/main/website/docs/03-Usage Docs/01-setup-meta-env.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Incremental Query Function Tutorial",permalink:"/docs/Tutorials/incremental-query"},next:{title:"Setup Your Spark and Flink Project/Job",permalink:"/docs/Usage Docs/setup-spark"}},i={},c=[];function d(e){const s={admonition:"admonition",code:"code",h1:"h1",p:"p",pre:"pre",...(0,t.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.h1,{id:"setup-lakesoul-meta-db",children:"Setup LakeSoul Meta DB"}),"\n",(0,o.jsxs)(s.p,{children:["LakeSoul use ",(0,o.jsx)(s.code,{children:"LAKESOUL_HOME"})," (case insensitive) environment variable or ",(0,o.jsx)(s.code,{children:"lakesoul_home"})," JVM property (case sensitive) to locate config file. The config file consists of required LakeSoul configs such as Postgres's connection info. An example property file is like the following:"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-ini",children:"lakesoul.pg.driver=com.lakesoul.shaded.org.postgresql.Driver\nlakesoul.pg.url=jdbc:postgresql://localhost:5432/lakesoul_test?stringtype=unspecified\nlakesoul.pg.username=lakesoul_test\nlakesoul.pg.password=lakesoul_test\n"})}),"\n",(0,o.jsx)(s.p,{children:"The above values are also the default values. So if you followed the quick start guide to start a PostgreSQL instance for local testing, you dont't have to set these configs manually."}),"\n",(0,o.jsx)(s.p,{children:"In production, change the connection url, username and password according to your deployment."}),"\n",(0,o.jsxs)(s.p,{children:["If the property file cannot be read, ",(0,o.jsx)(s.code,{children:"LAKESOUL_PG_DRIVER"}),", ",(0,o.jsx)(s.code,{children:"LAKESOUL_PG_URL"}),", ",(0,o.jsx)(s.code,{children:"LAKESOUL_PG_USERNAME"})," and ",(0,o.jsx)(s.code,{children:"LAKESOUL_PG_PASSWORD"})," environment variables will be used to set corresponding values."]}),"\n",(0,o.jsxs)(s.p,{children:["If the configurations cannot be found through environment variables, the JVM Property values of ",(0,o.jsx)(s.code,{children:"lakesoul.pg.dirver"}),", ",(0,o.jsx)(s.code,{children:"lakesoul.pg.url"}),", ",(0,o.jsx)(s.code,{children:"lakesoul.pg.username"})," and ",(0,o.jsx)(s.code,{children:"lakesoul.pg.password"})," will be searched respectively. If a configuration item is not configured, its default value is used."]}),"\n",(0,o.jsx)(s.admonition,{type:"caution",children:(0,o.jsxs)(s.p,{children:["Version 2.0.1 and before only supports ",(0,o.jsx)(s.code,{children:"lakesoul_home"})," env (in lower case) to locate the property file."]})}),"\n",(0,o.jsx)(s.admonition,{type:"caution",children:(0,o.jsxs)(s.p,{children:["Since 2.1.0, the Spark and Flink jars already include all their dependencies via maven shade plugin. And the PG driver class name should become ",(0,o.jsx)(s.code,{children:"com.lakesoul.shaded.org.postgresql.Driver"}),". And before 2.0.1 (included), the driver class name was ",(0,o.jsx)(s.code,{children:"org.postgresql.Driver"}),"."]})}),"\n",(0,o.jsx)(s.p,{children:"Then create LakeSoul meta tables:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-bash",children:"PGPASSWORD=lakesoul_test psql -h localhost -p 5432 -U lakesoul_test -f script/meta_init.sql\n"})}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.code,{children:"meta_init.sql"})," is located under ",(0,o.jsx)(s.code,{children:"script"})," dir in the source code."]})]})}function u(e={}){const{wrapper:s}={...(0,t.a)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},1151:(e,s,n)=>{n.d(s,{Z:()=>l,a:()=>a});var o=n(7294);const t={},r=o.createContext(t);function a(e){const s=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),o.createElement(r.Provider,{value:s},e.children)}}}]);